2 April 2013

The Linux kernel for CPUstress is compiled on Ubuntu 12.04.2 LTS (32-bit).

The source code of the kernel is from the official kernel.org site. No 
additional patch is applied.

Download the source code and then prepare the source directory for building:

 $ wget https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.8.5.tar.xz
 $ tar -x -v --xz -f linux-3.8.5.tar.xz
 $ cd linux-3.8.5
 $ make mrproper

Copy the "config-3.8.5-cpustress2" file into the source code directory, then 
rename it:

 $ mv config-3.8.5-cpustress2 .config

Build the kernel:

 $ make

Copy the kernel bzImage, which is located at "arch/x86/boot/bzImage", to a 
directory that you can boot from. For example in UBCD it's 
"${ubcd-extract}/ubcd/boot/cpustress/bzImage".

Install the modules (drivers) to a temporary directory: (I put them in the 
directory "/home/explorer/modules", but you may change the path if you like.)

 $ make INSTALL_MOD_PATH=/home/explorer/modules modules_install

Remove some unnecessary files in the modules directory:

 $ cd /home/explorer/modules/lib/modules/3.8.5-cpustress2
 $ rm build source
 $ rm modules.ccwmap modules.ieee1394map modules.inputmap modules.isapnpmap

Copy the modules to the CPUstress initrd image: (Assume that ${cpustress} is 
set to your "build-initrd" directory of the CPUstress image.)

 $ cd /home/explorer/modules
 $ cp -aR lib/modules ${cpustress}/lib

That's finished.

--Explorer <explorer09@gmail.com>
